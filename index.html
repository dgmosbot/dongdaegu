<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Naver Map Example</title>
    <script src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=gh21m9mjua" defer></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
            integrity="sha256-KyZXEAg3QhqLMpG8r+Knujsl5+D3M6Zbco3Dp1niP8s="
            crossorigin="anonymous" defer></script>
    <style>
        #map {
            width: 100%;
            height: 75vh;
            margin: 0 auto;
        }
    </style>
</head>
<body>

<!-- Map container -->
<div id="map"></div>

<script>
    // Use a fallback if jQuery fails to load
    if (typeof jQuery === 'undefined') {
        document.write('<script src="/path/to/local/jquery.min.js"><\/script>');
    }

    $(document).ready(function () {
        initMap();
    });

    function initMap() {
        const areaArr = [
            { location: '강남', lat: 37.4959854, lng: 127.0664091 },
            { location: '강동', lat: 37.5492077, lng: 127.1464824 },
            // Add other locations here
        ];

        const map = new naver.maps.Map('map', {
            center: new naver.maps.LatLng(37.5527581, 126.987326),
            zoom: 15
        });

        const markers = [];
        const infoWindows = [];

        areaArr.forEach((area, index) => {
            const marker = new naver.maps.Marker({
                map,
                title: area.location,
                position: new naver.maps.LatLng(area.lat, area.lng)
            });

            const infoWindow = new naver.maps.InfoWindow({
                content: `<div style="width:200px;text-align:center;padding:10px;">
                            <b>${area.location}</b><br>- 네이버 지도 -
                          </div>`
            });

            markers.push(marker);
            infoWindows.push(infoWindow);

            naver.maps.Event.addListener(marker, 'click', () => {
                if (infoWindow.getMap()) {
                    infoWindow.close();
                } else {
                    infoWindow.open(map, marker);
                }
            });
        });
    }
</script>

</body>
</html>


