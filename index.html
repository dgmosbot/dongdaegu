<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>카카오 맵</title>
  <style>
    .infowindow-content {
      font-size: 12px;
      padding: 5px;
      white-space: nowrap; /* 주소는 한 줄에 표시 */
      overflow-wrap: normal; /* 하이픈으로 인한 줄바꿈 방지 */
      word-break: keep-all; /* 단어 단위로 줄바꿈 (한글 포함) */
      display: inline-block; /* 내용에 맞게 박스 크기 조정 */
      max-width: 100%; /* 너비는 내용에 맞게 자동 조정 */
      background-color: rgba(255, 255, 255, 0.9);
      border-radius: 8px;
      box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2);
      border: 1px solid #ddd;
    }
  </style>

</head>
<body>
  <select id="담당자필터">
    <option value="전체">전체</option>
    <!-- 담당자 목록은 JavaScript에서 동적으로 채워짐 -->
  </select>
  <div id="map" style="width:100%;height:500px;"></div>
  <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=50b090ae92d698e12f5dd624d7493f78&autoload=false&libraries=services"></script>
  <script>
    function loadKakaoMap() {
      return new Promise((resolve) => {
        kakao.maps.load(() => {
          resolve();
        });
      });
    }

    async function checkKakaoMapAndInit() {
      if (typeof kakao !== 'undefined' && typeof kakao.maps !== 'undefined') {
        // kakao.maps 객체가 로드되었음을 확인
        console.log('카카오 맵 API 로드 완료');
        initMap();
      } else {
        // kakao.maps 객체가 아직 로드되지 않았으면 0.1초 후에 다시 확인
        console.log('카카오 맵 API 로드 중... 다시 확인');
        setTimeout(checkKakaoMapAndInit, 100);
      }
    }

    (async () => {
      await loadKakaoMap();
      checkKakaoMapAndInit();
    })();
  </script>
  <script src="script.js"></script>
</body>
</html>
